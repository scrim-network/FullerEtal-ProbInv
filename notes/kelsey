ask kelsey -- link to paper and inverse gamma stuff
    Kelsey's paper appendix--different windows--Table 1

the "windows" in the code come from Table 1
    calculated in an Excel spreadsheet?

    see email too




kelsey.ruckert [9:02 AM]  
joined #general

kelsey.ruckert [9:08 AM]  
There has been a lot of emails going back and for about the dais model, especially between Rob and me, so I thought I'd create a slack channel.

tonywong [10:00 AM]  
joined #general

slackbot [10:00 AM]  
Hello @tonywong, welcome to ​*dais*​. :wave: Everyone, say hi!

hotwater [12:08 PM]  
joined #general

slackbot [12:08 PM]  
Welcome to ​*dais*​, @hotwater! How's your day?

hotwater [12:16 PM]  
hmm, this is Rob.  maybe I should have a more informative name than hotwater?

hotwater [2:54 PM]  
Tony, I noticed you are using 2e6 iterations for DAIS.  What was the motivation?  Better convergence?


----- July 22nd -----
tonywong [8:39 AM]  
Not really. Basically, I picked a large number. And the "MCMC.parallel" (adaptive MCMC in parllel) won't add samples in parallel, so if you imagine you might need to do a million samples, then another million, in parallel you'd have the same run-time as 3 million samples (1 million in parallel, then 2x1 million in serial).

Taking 2e6 iterations, in parallel, allowed me to look at the Gelman and Rubin statistic as the chains progress, and diagnose how many iterations it takes to converge. My runs have been converging in something like 1e5 - 5e5 iterations, typically.

tonywong [8:49 AM]  
On an unrelated note, I'm noticing that when I run DAIS at parameters drawn from our pre-calibrated (MCMC) distributions, the projections in 2100 are crazy wide - like -10 to +10 meters SLR from AIS. This seemed to be because the slope as "good" runs make it through the Kelsey's 4th instrumental rpecal window could be anything. So I tried adding a 5th precalibration window, which is matchign the IPCC AR5 AIS trend for 1993-2010 (0.27 +/- 0.11 mm/year). I think the error on this trend is way too large for this "data point" to be of much use, and it doesn't have much impact on our precalibrated MCMC distributions.

Any thoughts or guidance on this?

So far what I've done is "post-calibrated" the entire model (DAIS+the rest of BRICK) on the Church and White (2011) sea level data, by only accepting simulations which make it through a 3-sigma "tunnel" through their data, from 1880-2013 (yeah, 2013 > 2011, but they updated their data set available on line). I picked 3 sigmas a la the notion that it should pick up 99ish % of normally distributed data (reasonable model runs) around the mean (CW2011 data).   DAIS parameters are drawn from the MCMC precalibrated distributions independently from the rest of the BRICK parameters, which are drawn from their MCMC calibrated posterior distributions. This gives a full set of BRICK paraemters (DAIS and other models). Then I do that post-calibration, and the parameter sets that yield simulations for total global mean SLR that make it through the tunnel are deemed "good" (post-calibrated parameters). And THEN kernel density estimates are fit to these post-calibrated parameters and draws from these multivariate KDEs are used to make the actual SLR projections.

Using that kind of post-calibration, it doesn't really matter that the DAIS parameters sometimes give such nutty projections. It shouldn't really be much of a surprise, I guess, since until the full model is coupled and getting estimates to SL, we don't have any idea of how good/bad those estimates are... (edited)

hotwater [4:51 PM]  
Kelsey, did your MCMC converge?


----- Today July 25th, 2016 -----
kelsey.ruckert [11:05 AM]  
@hotwater: Yes, the MCMC finished running. I'm currently running it again with a different seed  to check convergence based on the potential scale reduction factor. The plots I produced are similar to the ones you also got.

hotwater [11:06 AM]  
@kelsey.ruckert: if you don’t mind, where are your plots?  i would like to look.  thank you.

kelsey.ruckert [11:08 AM]  
If you go into my figure and supp figure folder, the figures have mc or MC at the end of the name. cd /woju/s0/sklr324/Ruckertetal_DAIS_codes/scratch/Figures

[11:09]  
Have you noticed any difference between how your C model and R model predicts sea level in the year 2300?  One of your test programs is giving me 2.5 m in the year 2300 for both your C model and Alex's Fortran model.  The R model is giving me 0.8 m.  If you are already aware of this I won't bother to look into whether or not I'm doing something wrong? @hotwater I will check this out either later today or tomorrow. Most likely, it will be tomorrow. I have several other projects to get done.

hotwater [11:12 AM]  
i ran 2e6 iterations over the weekend with both your and Alex C code.  currently re-working some code so i dont have plots, yet.  will make plots once ive got things the way i want them

[11:12]  
i also re-ran the Matlab version.  i had to add the missing sqrt(10).  you have not updated the Matlab with that fix, yet

kelsey.ruckert [11:20 AM]  
Ya I only updated that this morning.

kelsey.ruckert [11:27 AM]  
@hotwater: What do you mean by running the test programs? what parameters did you use to get 2.5 and 0.8m? I ran the staffer case#4 with my C model and got 2.03351. I then ran the same case parameters with my R model and got 0.4496192. From there I went back to Gary Shaffer's code. Running his code with my forcings out to 2300, produces SLE = 0.4496. I'll keep you updated on what I find. I have a few theory's on why this is happening.

hotwater [11:40 AM]  
~rwf136/src/dais/kelsey_run.R.  the model that is run is controlled by flags at the top of models.R.  it appears to be case #4, but not terribly certain

[11:40]  
but, lemme do a git fetch there

[11:40]  
bc it’s only current on my Macbook

[11:41]  
ok, up to date on woju

[11:42]  
4 ways of running it...

[11:42]  
useFmodel and useCmodel set to F, it runs your R code.  useFmodel set to true it runs fortran.  useCmodel set to true it runs C model.  alex set to true it runs Alex’s C model.  alex set to false it runs your C model

kelsey.ruckert [11:50 AM]  
@hotwater: The C, Fortran, and my updated matlab model scripts are correct. The difference is how we calculate beta. In gary shaffers code beta=eta*P^1/2; this is also the same in my original R version.  P^1/2 in matlab or R is not the same as the square root or to the half power. Instead it is P/2.  In the paper, equation 7 calls for the square root of P not P/2. When I correct this equation in the code I get SLE(240300) = 2.0335 which is exactly the same as the C/Fortran code. If you notice in the fortran and C code beta has the comment // equation 7 (corrected with respect to text). This is what the comment is talking about. All in all this means there is a typo in Gary Shaffer's model and subsequently my first model. Fixing this error increases the melting in during the warming periods because beta is a parameter impacting ice sheet runoff.

hotwater [11:52 AM]  
:slightly_smiling_face:

slackbot [11:52 AM] Only visible to you
Hey! Looks like you just posted an emoji response. Did you know you can also react to messages directly with emojis? Click ​*Add reaction ...*​ on any message to try it. You can also type `+:emoji_name:` or `cmd+shift+\` to react without leaving the comfort of your keyboard. Enjoy! :sparkles:
hotwater [11:53 AM]  
does this impact your paper?  or is the divergence only in projections beyond the paper?

new messages
kelsey.ruckert [11:58 AM]  
This will probably impact my paper. I will have to talk to klaus about it, but this just means that this simple model can effectively hit the LIG . Also since it is projecting much higher sea-level contribution it suggests MISI could be triggered (WAIS collapse ~3.3m) within the next few centuries and thats without considering MICI in the model.
